<?xml version="1.0" encoding="UTF-8"?>
<project name="levelup-dist" default="help">
    <!-- The temporary directory to store distributions. -->
    <property name="dist_build_dir" value="dist-build" />
    <property name="dist_dir" value="dist" />

    <target name="dist-source">
        <property name="dist_build_dir_inner" value="${dist_build_dir}/${dist_package}" />
        <mkdir dir="${dist_build_dir_inner}" />
        <copy todir="${dist_build_dir_inner}">
            <fileset dir=".">
                <include name="**/*.java" />
                <include name="**/*.xml" />
                <include name="project.properties" />
                <include name="proguard-project.txt" />
                <include name="README.md" />
                <include name="libs/" />
                <include name="res/" />

                <exclude name="gen" />
                <exclude name="${dist_build_dir}" />
                <exclude name="${dist_dir}" />
                <exclude name=".*" />
                <exclude name="*~" />
            </fileset>
        </copy>
        <echo file="${dist_build_dir_inner}/VERSION" encoding="utf-8">${dist_package}</echo>

        <zip destfile="${dist_dir}/${dist_package}.zip">
            <fileset dir="${dist_build_dir}" />
        </zip>

        <!-- Clean up the temporary distribution directory. -->
        <delete dir="${dist_build_dir}" />
    </target>
</project>

